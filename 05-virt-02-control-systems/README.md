# Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий
  > Решение. Для такого большого количества ВМ требуется уже Enterprise уровень системы управления виртуализацией. И т.к. преимущественно будет Windows based, то выбираю Microsoft Windows Hyper-V. Хотя можно выбрать и VMWare vSphere, если есть много денег.    
- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
  > Решение. Однозначно KVM, т.к. поддержка ВМ Windows в нем реализована лучше, чем в Xen, а также KVM производительнее Xen. 
- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры
  > Решение. Думаю лучше подойдет Oracle VirtualBox под хостовую ОС Windows из соображений максимальной совместимости с ВМ Windows. Также можно предложить бесплатный узкоспециализированный гипервизор-ОС Microsoft Hyper-V Server (который без GUI) 
- Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux
  > Решение. Преимущественно Vagrant + VirtualBox из-за требований ВМ только Linux и тестовых целей. Также можно и бесплатный Hyper-V на Windows 10 - он также прекрасно крутит ВМ Linux. 

## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.
> Решение.
> 1. Необходимо удалить средства интеграции VMWare из гостевых ОС на ВМ Linux и Windows
> 2. Выключить все ВМ Linux и Windows на vSphere.
> 3. При наличии платного ПО Microsoft System Center VMM 2019 можно использовать его мастер для конвертации целиком ВМ VMWare на Hyper-V. Либо можно использовать бесплатные утилиты для конвертации только виртуальных VMDK дисков от ВМ VMWare в виртуальные диски VHDX для ВМ Hyper-V с дальнейшим ручным созданием каждой ВМ на Hyper-V (CPU/RAM/NIC) с подключением конвертированных дисков VHDX.
> 4. После включения сконвертированных ВМ на Hyper-V необходимо установить на их гостевые ОС средства интеграции Hyper-V и проверить в Windows и Linux наличие установленных драйверов для всех виртуальных устройств Hyper-V.
> 5. Задать те же статические ip адреса ВМ на NIC внутри гостевых ОС Windows и Linux.  


## Задача 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
> Решение. Основные проблемы - каждый последующий запущенный на одном физическом хосте гипервизор системы управления виртуализацией будет отжирать ресурсы физического хоста для своей работы. Как следствие - меньше ресурсов будет доступно самим ВМ. Также возможны проблемы со стабильностью работы хостовой ОС из-за наличия одновременно установленных разных систем управления виртуализацией. Чтобы избежать эти риски, нужно для отдельного физического хоста выбирать только одну систему управления виртуализацией (гипервизор) исходя из конкретных требований к ВМ. Естественно, если есть выбор, то лучше никогда не применять гетерогенные среды виртуализации на одном физическом хосте!  
